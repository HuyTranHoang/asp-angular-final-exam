<div class="mb-3 d-flex justify-content-end">
  <button class="btn btn-primary" routerLink="/admin">Danh sách sản phẩm</button>
</div>

<section class="bg-dark p-4 row">
  <div class="col-9">
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label class="form-label">Tên</label>
        <input type="text"
               class="form-control"
               formControlName="name"
               [class.is-invalid]="productForm.get('name')?.invalid
             && (productForm.get('name')?.touched || isSubmitted)"
               placeholder="Sản phẩm">
        <span *ngIf="productForm.get('name')?.hasError('required') && (productForm.get('name')?.touched || isSubmitted)"
              class="text-danger"><i class="fa fa-times"></i> Trường này là bắt buộc</span>
      </div>

      <div class="mb-3">
        <label class="form-label">Mô tả</label>
        <textarea class="form-control"
                  formControlName="description"
                  [class.is-invalid]="productForm.get('description')?.invalid
                && (productForm.get('description')?.touched  || isSubmitted)"
                  rows="3">
      </textarea>
        <span *ngIf="productForm.get('description')?.hasError('required') && (productForm.get('description')?.touched  || isSubmitted)"
              class="text-danger"><i class="fa fa-times"></i> Trường này là bắt buộc</span>
      </div>

      <div class="mb-3">
        <label class="form-label">Giá</label>
        <input type="text"
               class="form-control"
               formControlName="price"
               [class.is-invalid]="productForm.get('price')?.invalid
              && (productForm.get('price')?.touched || isSubmitted)"
               placeholder="10000">
        <span *ngIf="productForm.get('price')?.hasError('required') && (productForm.get('price')?.touched || isSubmitted)"
              class="text-danger"><i class="fa fa-times"></i> Trường này là bắt buộc</span>
        <span *ngIf="productForm.get('price')?.hasError('pattern') && productForm.get('price')?.touched"
              class="text-danger"><i class="fa fa-times"></i> Sai định dạng, chỉ có thể nhập số</span>
      </div>

      <div class="mb-3">
        <label class="form-label">Hình ảnh</label>
        <input class="form-control" type="file" (change)="getFile($event)">
      </div>

      <div class="mb-3">
        <label class="form-label">Danh mục</label>
        <select class="form-select"
                [class.is-invalid]="productForm.get('categoryId')?.invalid && productForm.get('categoryId')?.touched"
                formControlName="categoryId" >
          <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
        </select>
      </div>

    </form>
  </div>

  <div class="col-3">
    <span>Xem trước hình ảnh</span>
    <div class="img-wrapper rounded mt-2">
      <img [src]="imageSrc || 'https://www.signfix.com.au/wp-content/uploads/2017/09/placeholder-600x400.png'" class="img" alt="hình ảnh xem trước">
    </div>

    <div class="mt-3">
      <button style="width: 200px" class="btn btn-success" (click)="onSubmit()">Cập nhật</button>
    </div>
  </div>

</section>
